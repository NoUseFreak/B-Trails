{% extends '::base.html.twig' %}

{% block content %}
    <div class="row">
        <div class="col-md-8">
            <div id="map" style="width: 100%; height: 400px;"></div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <div class="card-block">
                    <h4 class="card-title">{{ trail.node.title }}</h4>
                    <p class="card-text">{{ trail.description | raw }}</p>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">Distance: {{ trail.distance }}k</li>
                    {% if trail.color or trail.shape %}
                        <li class="list-group-item">Signalisation: {{ "#{trail.color} #{trail.shape}" }}</li>
                    {% endif %}
                </ul>
                <div class="card-block">
                    <address>
                        <strong>Starting Point</strong><br>
                        {{ "#{trail.location.street} #{trail.location.nbr}" }}<br>
                        {{ "#{trail.location.postal} #{trail.location.city}, #{trail.location.country}" }}
                    </address>
                </div>
                <div class="card-block">
                    <a href="#" class="card-link">Download gpx</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="{{ asset('bundles/app/js/gpxparser.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/app/js/loadgpx.js') }}"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var mapOptions = {
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map"), mapOptions);
            loadGPXFileIntoGoogleMap(map, "http://127.0.0.1:8000/bundles/app/gpx/voeren-bronnenwandeling-9k.gpx");
        });
    </script>
{% endblock %}